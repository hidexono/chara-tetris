<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è„³ãƒˆãƒ¬ ç†Ÿèªžãƒ†ãƒˆãƒªã‚¹</title>
<style>
body {
    background: linear-gradient(135deg,#eef5ff,#ffffff);
    font-family: "Yu Gothic","Hiragino Kaku Gothic ProN",sans-serif;
    text-align:center;
}
#game {
    margin:auto;
    margin-top:20px;
    width:300px;
    height:520px;
    border:3px solid #333;
    background:#f9fbff;
    position:relative;
    overflow:hidden;
}
.block {
    position:absolute;
    width:60px;
    height:60px;
    background:#4a76ff;
    color:white;
    font-size:22px;
    font-weight:bold;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
}
#info {
    margin-top:10px;
    font-size:18px;
}
</style>
</head>

<body>

<h1>ðŸ§  ç†Ÿèªžãƒ†ãƒˆãƒªã‚¹è„³ãƒˆãƒ¬</h1>

<div id="game"></div>
<div id="info">ã‚¹ã‚³ã‚¢: <span id="score">0</span></div>

<script>
const game = document.getElementById("game");
const scoreSpan = document.getElementById("score");

const jukugo = [
  "è¨˜æ†¶","åˆ¤æ–­","é›†ä¸­","åŠªåŠ›","æˆåŠŸ","å®‰å¿ƒ","åå¿œ","é€Ÿåº¦",
  "è¨˜æ†¶åŠ›","åˆ¤æ–­åŠ›","æ³¨æ„åŠ›","å‡¦ç†èƒ½","é›†ä¸­åŠ›","è¦³å¯ŸåŠ›",
  "ä»¥å¿ƒä¼å¿ƒ","æ¸©æ•…çŸ¥æ–°","è©¦è¡ŒéŒ¯èª¤","è‡¨æ©Ÿå¿œå¤‰","ä¸€çŸ³äºŒé³¥","ç™¾ç™ºç™¾ä¸­"
];

let blocks = [];
let score = 0;
let speed = 700;

function randomJukugo(){
    return jukugo[Math.floor(Math.random()*jukugo.length)];
}

function createBlock(){
    const b = document.createElement("div");
    b.className = "block";
    b.textContent = randomJukugo();
    b.style.left = Math.floor(Math.random()*5)*60+"px";
    b.style.top = "0px";
    game.appendChild(b);
    blocks.push(b);
}

function moveBlocks(){
    for(let b of blocks){
        let y = parseInt(b.style.top);
        b.style.top = y+10+"px";
        if(y > 460){
            gameOver();
        }
    }
    checkLines();
}

function checkLines(){
    let rows = {};
    for(let b of blocks){
        let y = Math.round(parseInt(b.style.top)/60)*60;
        if(!rows[y]) rows[y]=[];
        rows[y].push(b);
    }

    for(let y in rows){
        if(rows[y].length >= 5){
            rows[y].forEach(b=>b.remove());
            blocks = blocks.filter(b=>!rows[y].includes(b));
            score+=10;
            scoreSpan.textContent = score;
            speed = Math.max(200, speed-20);
        }
    }
}

function gameOver(){
    alert("ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼\nã‚¹ã‚³ã‚¢: "+score);
    location.reload();
}

setInterval(createBlock, 1500);
setInterval(moveBlocks, speed);

document.addEventListener("keydown", e=>{
    if(blocks.length==0) return;
    let b = blocks[blocks.length-1];
    let x = parseInt(b.style.left);
    if(e.key=="ArrowLeft" && x>0) b.style.left = x-60+"px";
    if(e.key=="ArrowRight" && x<240) b.style.left = x+60+"px";
    if(e.key=="ArrowDown") b.style.top = parseInt(b.style.top)+40+"px";
});
</script>

</body>
</html>
